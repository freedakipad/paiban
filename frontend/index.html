<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PaiBan API 控制台</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📅</text></svg>">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">📅</div>
        <div>
          <div class="logo-text">PaiBan</div>
          <div class="logo-subtitle">智能排班引擎 API 控制台</div>
        </div>
      </div>
      <div class="server-config">
        <input type="text" id="serverUrl" class="server-input" value="http://localhost:7012" placeholder="服务器地址">
        <div class="status-indicator">
          <span class="status-dot" id="statusDot"></span>
          <span id="statusText">检测中...</span>
        </div>
      </div>
    </div>
  </header>

  <main class="main">
    <!-- 左侧边栏 - 场景选择 -->
    <aside class="sidebar">
      <div class="scenario-card restaurant active" data-scenario="restaurant">
        <div class="scenario-header">
          <div class="scenario-icon">🍜</div>
          <div>
            <div class="scenario-title">餐饮门店</div>
            <div class="scenario-subtitle">Restaurant Scheduling</div>
          </div>
        </div>
        <div class="scenario-description">适用于餐厅、咖啡店等服务业的员工排班</div>
        <div class="scenario-features">
          <span class="feature-tag">早/晚班</span>
          <span class="feature-tag">技能匹配</span>
          <span class="feature-tag">周末加班</span>
        </div>
      </div>

      <div class="scenario-card factory" data-scenario="factory">
        <div class="scenario-header">
          <div class="scenario-icon">🏭</div>
          <div>
            <div class="scenario-title">工厂产线</div>
            <div class="scenario-subtitle">Factory Shift Management</div>
          </div>
        </div>
        <div class="scenario-description">适用于制造业三班倒、连续生产场景</div>
        <div class="scenario-features">
          <span class="feature-tag">三班制</span>
          <span class="feature-tag">倒班规则</span>
          <span class="feature-tag">夜班限制</span>
        </div>
      </div>

      <div class="scenario-card housekeeping" data-scenario="housekeeping">
        <div class="scenario-header">
          <div class="scenario-icon">🏠</div>
          <div>
            <div class="scenario-title">家政服务</div>
            <div class="scenario-subtitle">Housekeeping Dispatch</div>
          </div>
        </div>
        <div class="scenario-description">适用于家政公司的订单派工场景</div>
        <div class="scenario-features">
          <span class="feature-tag">技能匹配</span>
          <span class="feature-tag">区域优化</span>
          <span class="feature-tag">订单优先</span>
        </div>
      </div>

      <div class="scenario-card nursing" data-scenario="nursing">
        <div class="scenario-header">
          <div class="scenario-icon">💊</div>
          <div>
            <div class="scenario-title">长护险/护理</div>
            <div class="scenario-subtitle">Long-term Care</div>
          </div>
        </div>
        <div class="scenario-description">适用于护理机构的护理员排班</div>
        <div class="scenario-features">
          <span class="feature-tag">护理计划</span>
          <span class="feature-tag">连续性</span>
          <span class="feature-tag">资质要求</span>
        </div>
      </div>

      <!-- 快捷操作 -->
      <div class="quick-actions">
        <div class="quick-actions-title">快捷操作</div>
        <button class="quick-btn" onclick="checkHealth()">💓 健康检查</button>
        <button class="quick-btn" onclick="getVersion()">📋 获取版本</button>
        <button class="quick-btn" onclick="getConstraintTemplates()">📐 约束模板</button>
        <button class="quick-btn" onclick="getConstraintLibrary()">📚 约束库</button>
      </div>
    </aside>

    <!-- 右侧内容区 - 主Tab切换 -->
    <div class="content">
      <div class="panel main-panel">
        <div class="panel-header main-panel-header">
          <div class="main-tabs">
            <button class="main-tab active" data-main-tab="request" onclick="switchMainTab('request')">
              📝 请求配置
            </button>
            <button class="main-tab" data-main-tab="response" onclick="switchMainTab('response')">
              📊 响应结果
              <span class="status-badge waiting" id="responseStatusBadge">⏳</span>
              <span class="response-indicator" id="responseIndicator" style="display: none;">●</span>
            </button>
          </div>
          <div class="panel-actions">
            <button class="btn btn-secondary" onclick="formatRequest()">🔧 格式化</button>
            <button class="btn btn-secondary" onclick="resetRequest()">↩️ 重置</button>
            <button class="btn btn-primary" id="sendBtn" onclick="sendRequest()">🚀 发送请求</button>
          </div>
        </div>

        <!-- 请求配置 Tab 内容 -->
        <div class="main-tab-content active" id="requestContent">
          <div class="panel-body">
            <div class="endpoint-display">
              <span class="method-badge post" id="requestMethod">POST</span>
              <span class="endpoint-method" id="endpointMethod">POST</span>
              <span class="endpoint-path" id="endpointPath">/api/v1/schedule/generate</span>
            </div>
            
            <!-- 请求内容 Tab -->
            <div class="tabs">
              <button class="tab active" data-tab="reqBiz" onclick="switchRequestTab('reqBiz')">📊 业务配置</button>
              <button class="tab" data-tab="reqJson" onclick="switchRequestTab('reqJson')">{ } JSON 编辑</button>
            </div>
            
            <div class="tab-content active" id="reqBizTab">
              <div class="request-biz-view" id="requestBizView">
                <div class="response-placeholder">
                  <div class="response-placeholder-icon">📋</div>
                  <span>加载中...</span>
                </div>
              </div>
            </div>
            
            <div class="tab-content" id="reqJsonTab">
              <textarea class="code-editor" id="requestBody" spellcheck="false"></textarea>
            </div>
          </div>
        </div>

        <!-- 响应结果 Tab 内容 -->
        <div class="main-tab-content" id="responseContent">
          <div class="panel-body">
            <div class="response-meta" id="responseMeta" style="display: none;">
              <div class="response-meta-item">
                <span class="response-meta-label">状态:</span>
                <span class="response-meta-value success" id="responseStatus">-</span>
              </div>
              <div class="response-meta-item">
                <span class="response-meta-label">耗时:</span>
                <span class="response-meta-value" id="responseTime">-</span>
              </div>
              <div class="response-meta-item">
                <span class="response-meta-label">大小:</span>
                <span class="response-meta-value" id="responseSize">-</span>
              </div>
              <button class="btn btn-secondary" onclick="copyResponse()" style="margin-left: auto;">📋 复制</button>
              <button class="btn btn-secondary" onclick="clearResponse()">🗑️ 清除</button>
            </div>
            
            <div class="results-summary" id="resultsSummary" style="display: none;">
              <div class="summary-card">
                <div class="summary-value green" id="summaryAssignments">0</div>
                <div class="summary-label">排班数</div>
              </div>
              <div class="summary-card">
                <div class="summary-value cyan" id="summaryFillRate">0%</div>
                <div class="summary-label">满足率</div>
              </div>
              <div class="summary-card">
                <div class="summary-value purple" id="summaryScore">0</div>
                <div class="summary-label">约束得分</div>
              </div>
              <div class="summary-card">
                <div class="summary-value orange" id="summaryDuration">-</div>
                <div class="summary-label">计算耗时</div>
              </div>
            </div>
            
            <div class="tabs" id="responseTabs" style="display: none;">
              <button class="tab active" data-tab="resBiz" onclick="switchResponseTab('resBiz')">📊 业务视图</button>
              <button class="tab" data-tab="resJson" onclick="switchResponseTab('resJson')">{ } JSON 原始数据</button>
            </div>
            
            <div class="tab-content active" id="resBizTab">
              <div class="business-view" id="businessView">
                <div class="response-placeholder">
                  <div class="response-placeholder-icon">📡</div>
                  <span>选择场景并发送请求</span>
                </div>
              </div>
            </div>
            
            <div class="tab-content" id="resJsonTab">
              <pre class="response-output" id="responseOutput"></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="scenarios.js"></script>
  <script src="app.js"></script>
</body>
</html>
